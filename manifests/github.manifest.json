{
  "manifest_version": 2,
  "key": "github",
  "name": "GitHub",
  "description": "Collects GitHub repository content and supports GitHub write actions",
  "version": "1.1.0",
  "file": "connectors/github_connector.ts",
  "authSchema": {
    "methods": [
      {
        "type": "oauth",
        "provider": "github",
        "requiredScopes": [
          "repo",
          "read:user"
        ],
        "authorizationUrl": "https://github.com/login/oauth/authorize",
        "tokenUrl": "https://github.com/login/oauth/access_token",
        "description": "GitHub OAuth enables access to private repositories and higher rate limits (5000 req/hour)",
        "required": false,
        "scope": "source",
        "clientIdKey": "GITHUB_CLIENT_ID",
        "clientSecretKey": "GITHUB_CLIENT_SECRET"
      },
      {
        "type": "env_keys",
        "required": false,
        "scope": "source",
        "description": "Optional OAuth app credentials and fallback token.",
        "fields": [
          {
            "key": "GITHUB_CLIENT_ID",
            "label": "GitHub Client ID",
            "description": "OAuth App client ID used for GitHub account linking.",
            "example": "Iv1.6f9c2a1d8b4e7a3c"
          },
          {
            "key": "GITHUB_CLIENT_SECRET",
            "label": "GitHub Client Secret",
            "secret": true,
            "description": "OAuth App client secret used for GitHub account linking.",
            "example": "7a6f5d4c3b2a1098e7d6c5b4a3f2e1d0c9b8a7f6"
          },
          {
            "key": "GITHUB_TOKEN",
            "label": "GitHub Token",
            "secret": true,
            "description": "Personal access token used as fallback auth for API requests.",
            "example": "ghp_M4nY2k8Qp7Rr5sTt3uVv9WwXx1YyZzAaBbCcD"
          }
        ]
      }
    ]
  },
  "feeds": {
    "content": {
      "key": "content",
      "name": "Repository Content",
      "description": "Sync repository issues, PRs, comments, or discussions",
      "config_schema": {
        "type": "object",
        "required": [
          "repo_owner",
          "repo_name",
          "content_type"
        ],
        "properties": {
          "repo_owner": {
            "type": "string",
            "minLength": 1,
            "description": "Repository owner (user or organization)"
          },
          "repo_name": {
            "type": "string",
            "minLength": 1,
            "description": "Repository name"
          },
          "content_type": {
            "type": "string",
            "enum": [
              "issues",
              "pull_requests",
              "issue_comments",
              "pr_comments",
              "discussions",
              "discussion_comments"
            ],
            "description": "Content type to sync"
          },
          "labels_filter": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Optional labels filter for issues/pull requests"
          },
          "lookback_days": {
            "type": "integer",
            "minimum": 1,
            "maximum": 730,
            "default": 365,
            "description": "Initial sync lookback window"
          }
        }
      }
    }
  },
  "actions": {
    "create_issue": {
      "key": "create_issue",
      "name": "Create Issue",
      "description": "Create a new issue in the configured repository",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "title"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "body": {
            "type": "string"
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "assignees": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    },
    "add_issue_comment": {
      "key": "add_issue_comment",
      "name": "Add Issue Comment",
      "description": "Add a comment to an issue or pull request",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "issue_number",
          "body"
        ],
        "properties": {
          "issue_number": {
            "type": "integer"
          },
          "body": {
            "type": "string"
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    },
    "close_issue": {
      "key": "close_issue",
      "name": "Close Issue",
      "description": "Close an issue by number",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "issue_number"
        ],
        "properties": {
          "issue_number": {
            "type": "integer"
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    },
    "reopen_issue": {
      "key": "reopen_issue",
      "name": "Reopen Issue",
      "description": "Reopen an issue by number",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "issue_number"
        ],
        "properties": {
          "issue_number": {
            "type": "integer"
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    },
    "create_pull_request": {
      "key": "create_pull_request",
      "name": "Create Pull Request",
      "description": "Create a pull request from head to base branch",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "title",
          "head",
          "base"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "head": {
            "type": "string"
          },
          "base": {
            "type": "string"
          },
          "body": {
            "type": "string"
          },
          "draft": {
            "type": "boolean"
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    },
    "merge_pull_request": {
      "key": "merge_pull_request",
      "name": "Merge Pull Request",
      "description": "Merge a pull request by number",
      "requiresApproval": true,
      "input_schema": {
        "type": "object",
        "required": [
          "pull_number"
        ],
        "properties": {
          "pull_number": {
            "type": "integer"
          },
          "merge_method": {
            "type": "string",
            "enum": [
              "merge",
              "squash",
              "rebase"
            ]
          },
          "commit_title": {
            "type": "string"
          },
          "commit_message": {
            "type": "string"
          },
          "repo_owner": {
            "type": "string"
          },
          "repo_name": {
            "type": "string"
          }
        }
      }
    }
  },
  "optionsSchema": {
    "description": "GitHub connector options - each connector tracks ONE content type",
    "$id": "GitHubOptions",
    "type": "object",
    "required": [
      "repo_owner",
      "repo_name",
      "content_type"
    ],
    "properties": {
      "repo_owner": {
        "description": "Repository owner (user or organization)",
        "example": "openai",
        "minLength": 1,
        "type": "string"
      },
      "repo_name": {
        "description": "Repository name",
        "example": "openai-python",
        "minLength": 1,
        "type": "string"
      },
      "content_type": {
        "description": "Content type: ONE type per connector for reliable checkpointing. Create separate connectors for different types.",
        "anyOf": [
          {
            "const": "issues",
            "type": "string"
          },
          {
            "const": "pull_requests",
            "type": "string"
          },
          {
            "const": "issue_comments",
            "type": "string"
          },
          {
            "const": "pr_comments",
            "type": "string"
          },
          {
            "const": "discussions",
            "type": "string"
          },
          {
            "const": "discussion_comments",
            "type": "string"
          }
        ]
      },
      "labels_filter": {
        "description": "Filter by specific labels (optional, applies to issues and PRs only)",
        "example": [
          "bug",
          "enhancement"
        ],
        "minItems": 1,
        "type": "array",
        "items": {
          "minLength": 1,
          "type": "string"
        }
      },
      "lookback_days": {
        "description": "Number of days to look back for historical data. Default: 365 (1 year). Maximum: 730 (2 years).",
        "example": 120,
        "minimum": 1,
        "maximum": 730,
        "default": 365,
        "type": "number"
      }
    }
  }
}
